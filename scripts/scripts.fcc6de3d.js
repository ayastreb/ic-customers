!function(){"use strict";angular.module("customersApp",["uiGmapgoogle-maps","ui.bootstrap-slider"])}(),function(){"use strict";function a(a,b,c){function d(a){return function(b){return b.distance<=a}}function e(a){f.map.center.latitude=a.latitude,f.map.center.longitude=a.longitude}var f=this;f.defaultMarker="https://maps.gstatic.com/mapfiles/api-3/images/spotlight-poi.png",f.greenMarker="http://gmapsmarkergenerator.eu01.aws.af.cm/getmarker?scale=1&color=00ff00",f.blueMarker="http://gmapsmarkergenerator.eu01.aws.af.cm/getmarker?scale=1&color=00ffff",f.map={center:{latitude:0,longitude:0},zoom:8},f.errors=b.messages,f.customers=a.customers,f.officeLocation=a.officeLocation,f.filterDistance=100,f.centerMapOn=e,f.distanceLessThen=d,c.then(function(){e(f.officeLocation)})}angular.module("customersApp").controller("CustomersCtrl",a),a.$inject=["CustomersService","ErrorStorage","uiGmapGoogleMapApi"]}(),function(){"use strict";function a(){return{messages:[]}}angular.module("customersApp").service("ErrorStorage",a)}(),function(){"use strict";function a(a){return function(b){if(!(b instanceof Error))throw b;a.messages.push(b.message)}}angular.module("customersApp").config(["$provide",function(b){b.decorator("$exceptionHandler",a)}]),a.$inject=["ErrorStorage"]}(),function(){"use strict";function a(a){function b(b){function c(){e.resolve(f.result)}function d(){e.reject(f.result)}var e=a.defer(),f=new FileReader;return f.onload=c,f.onerror=d,f.readAsText(b),e.promise}return{readAsText:b}}angular.module("customersApp").service("FileReaderService",a),a.$inject=["$q"]}(),function(){"use strict";function a(){function a(a){return"string"!=typeof a?[]:a.split("\n").filter(b).map(c)}function b(a){return"string"==typeof a&&a.length>0}function c(a){try{return JSON.parse(a)}catch(b){throw new Error("Could not parse file. Please, make sure it contains customer data encoded in JSON.")}}return{parseText:a}}angular.module("customersApp").service("TextParserService",a)}(),function(){"use strict";function a(){function a(a,e){c(a),c(e);var f=b(a.latitude),g=b(e.latitude),h=b(a.longitude-e.longitude),i=Math.acos(Math.sin(f)*Math.sin(g)+Math.cos(f)*Math.cos(g)*Math.cos(h));return Math.round(d*i*10)/10}function b(a){return a*(Math.PI/180)}function c(a){if("object"!=typeof a)throw new Error("Missing point parameter");if(!a.hasOwnProperty("latitude"))throw new Error("Missing latitude");if(!a.hasOwnProperty("longitude"))throw new Error("Missing longitude");if(a.latitude<-90||a.latitude>90)throw new Error("Invalid latitude. Must be in range of -90 to 90");if(a.longitude<-180||a.longitude>180)throw new Error("Invalid longitude. Must be in range of -180 to 180")}var d=6371;return{calculate:a}}angular.module("customersApp").service("DistanceService",a)}(),function(){"use strict";function a(a,b){function c(b){g.length=0,a.parseText(b).filter(d).map(e).forEach(function(a){g.push(a)})}function d(a){var b=!0;return["latitude","longitude","name","user_id"].some(function(c){return a.hasOwnProperty(c)?void 0:(b=!1,!0)}),b}function e(a){var c={latitude:parseFloat(a.latitude),longitude:parseFloat(a.longitude)};return{id:a.user_id,name:a.name,location:c,distance:b.calculate(f,c)}}var f={latitude:53.3381985,longitude:-6.2592576},g=[];return{customers:g,officeLocation:f,fromText:c}}angular.module("customersApp").service("CustomersService",a),a.$inject=["TextParserService","DistanceService"]}(),function(){"use strict";function a(a,b){function c(c,d){function e(c){var d=(c.srcElement||c.target).files[0];a.readAsText(d).then(b.fromText)}d.bind("change",e)}return{link:c}}angular.module("customersApp").directive("icFileSelect",a),a.$inject=["FileReaderService","CustomersService"]}(),function(){"use strict";function a(a){function b(b,c,d){a(function(){c.hide()},d.icHideAfter||3e3)}return{link:b}}angular.module("customersApp").directive("icHideAfter",a),a.$inject=["$timeout"]}();